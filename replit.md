# Football Play Designer

## Overview

The Football Play Designer is a free, web-based tool enabling amateur coaches to create offensive, defensive, and special teams plays. It features a drag-and-drop canvas for player positioning and route drawing, with the ability to export plays as images. Designed as a single-page application, it requires no authentication and is optimized for accessibility across desktop, tablet, and mobile devices. The project aims to provide a user-friendly and efficient play design experience, catering to the needs of grassroots football coaching.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture

The frontend is built with **React** and **TypeScript** using **Vite** for fast development. UI components leverage **shadcn/ui** (based on Radix UI) and **Tailwind CSS** for a consistent and customizable design system. State management primarily uses **React hooks** due to the UI-centric nature of the application. **Wouter** handles client-side routing. The design system uses custom CSS variables for theming, including dark mode, aligning with defined design guidelines.

### Canvas and Drawing System

The core play design functionality utilizes **HTML5 Canvas** and SVG for rendering. A central `FIELD` configuration object defines all field geometry (e.g., `FIELD.WIDTH`, `FIELD.HEIGHT`, `FIELD.PIXELS_PER_YARD`), ensuring consistent scaling and layout. The field is vertically oriented (694Ã—392px) with a 60px header for metadata. Key features include:

-   **Field Elements**: Line of scrimmage, yard lines, hash marks, draggable footballs, and a play-action marker.
-   **Motion Routes**: Displayed with a visual split at the Line of Scrimmage (dotted before, solid after).
-   **Export Functionality**: Uses `html-to-image` to generate downloadable PNGs. Exports at native size (694x392) maintain pixel-perfect quality, while other sizes are generated by capturing at 2x resolution and downscaling with high-quality smoothing for crisp results.
-   **Interaction Model**: Drag-and-drop for players, click-to-draw for routes. A **long-press cascading menu** on players allows mouse-only route creation with options for route type and properties.
-   **Player Interactions**: Quick tap to select, double tap to edit label, long-press for route menu, drag to move.

### Backend Architecture

The backend uses **Express.js** with **TypeScript** on Node.js. It's designed to be lightweight, primarily serving static assets, with most application logic handled client-side. Separate entry points (`index-dev.ts`, `index-prod.ts`) manage development with Vite integration and production serving. API routes are prefixed with `/api`.

### Data Storage and Persistence

**Drizzle ORM** configured with **PostgreSQL** (via **Neon Database**) is used for type-safe database operations, although the MVP relies on client-side storage for plays (e.g., `localStorage`) due to the "no login" requirement. An in-memory `MemStorage` is used for development. A basic `users` schema exists, likely for future authentication. Play data, when persistent, will include metadata, player positions, routes, shapes, and play type.

### Play Type Tabs and State Separation

The application features three play type tabs (Offense, Defense, Special Teams), each maintaining completely independent state (players, routes, shapes, footballs, metadata, undo history). Tab switching saves the current state and loads the target tab's state, clearing selections. The Defense tab includes a "Add Offense?" checkbox to load offensive formations for defensive play design. QB positioning logic is specific to the "Offense" tab to avoid unintended movement of defensive players.

## External Dependencies

### Third-Party UI Libraries

-   **Radix UI**: Accessible component primitives.
-   **shadcn/ui**: Styled components built on Radix UI.
-   **Lucide React**: Icon library.
-   **class-variance-authority (CVA)**: For variant-based component APIs.

### Forms and Validation

-   **React Hook Form**: Form state management.
-   **Zod**: Schema validation.

### Database and ORM

-   **Drizzle ORM**: Type-safe database toolkit.
-   **@neondatabase/serverless**: PostgreSQL client for Neon.
-   **drizzle-kit**: Schema migration tool.

### Utilities and Tooling

-   **TanStack Query**: Data fetching and caching.
-   **date-fns**: Date manipulation.
-   **clsx & tailwind-merge**: Utility for classNames.
-   **html-to-image**: DOM to image conversion for exports.

### Build Tools

-   **Vite**: Frontend build tool.
-   **esbuild**: Server bundling.
-   **TypeScript**: Type checking.
-   **PostCSS**: CSS processing.

### Replit Integration

-   **@replit/vite-plugin-runtime-error-modal**: Error overlay.
-   **@replit/vite-plugin-cartographer**: Workspace integration.
-   **@replit/vite-plugin-dev-banner**: Development banner.

### Session Management

-   **connect-pg-simple**: PostgreSQL session store for Express (currently configured).

### Canvas/Graphics

-   **embla-carousel-react**: Carousel component.
-   **vaul**: Drawer component library.